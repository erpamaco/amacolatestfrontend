(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[250],{2645:function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"c",(function(){return c})),t.d(a,"a",(function(){return i})),t.d(a,"d",(function(){return s}));var n=t(26),l=t.n(n),r=function(){return l.a.get("http://www.dataqueuesystems.com/amaco/amaco/public/api/products")},c=function(e){return l.a.get("/api/invoices",{data:e})},i=function(e){return l.a.post("/api/invoices/add",e)},s=function(e){return l.a.post("/api/invoices/update",e)}},3618:function(e,a,t){"use strict";t.r(a);var n=t(18),l=t(0),r=t.n(l),c=t(1389),i=t(7),s=t(19),m=t(691),u=t(1449),o=t(692),d=t(2122),b=t(1679),p=t(1683),f=t(1680),E=t(1682),v=t(1681),j=t(31),O=t(46),g=t(2645),N=t(2116),y=t(704),h=t(5),x=["palette"],w=Object(y.a)((function(e){e.palette,Object(s.a)(e,x);return{"@global":{"@media print":{"body, *, html":{visibility:"hidden"},"#print-area":{position:"fixed",top:0,left:0,right:0,height:"100%","& *":{visibility:"visible"}}}},invoiceViewer:{"& h5":{fontSize:15}}}})),M=function(e){var a=e.toggleInvoiceEditor,t=Object(l.useState)({}),s=Object(n.a)(t,2),y=s[0],x=s[1],M=Object(j.i)().id,C=w();Object(l.useEffect)((function(){"add"!==M&&Object(g.c)(M).then((function(e){x(Object(i.a)({},e.data))}))}),[M]);y.orderNo,y.buyer,y.seller;var q=y.item,k=void 0===q?[]:q,I=(y.status,y.vat,y.date);return r.a.createElement("div",{className:Object(h.default)("invoice-viewer py-4",C.invoiceViewer)},r.a.createElement("div",{className:"viewer_actions px-4 mb-5 flex items-center justify-between"},r.a.createElement(O.b,{to:"/invoice/list"},r.a.createElement(m.a,null,r.a.createElement(u.a,null,"arrow_back"))),r.a.createElement("div",null,r.a.createElement(o.a,{className:"mr-4 py-2",variant:"contained",color:"primary",onClick:function(){return a()}},"Edit Invoice"),r.a.createElement(o.a,{onClick:function(){return window.print()},className:"py-2",variant:"contained",color:"secondary"},"Print Invoice"))),r.a.createElement("div",{id:"print-area"},r.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},r.a.createElement("div",null,r.a.createElement("p",{className:"mb-4"},"Customer Name"),r.a.createElement("p",{className:"mb-0"},"# ")),r.a.createElement("div",{className:"text-right"},r.a.createElement("h5",{className:"font-normal mb-4 capitalize"},r.a.createElement("strong",null,"Requested date: ")," ",r.a.createElement("span",null,I?Object(N.a)(new Date(I).getTime(),"MMMM dd, yyyy"):"")),r.a.createElement("h5",{className:"font-normal capitalize"},r.a.createElement("strong",null,"Due date: ")," ",r.a.createElement("span",null,I?Object(N.a)(new Date(I).getTime(),"MMMM dd, yyyy"):"")))),r.a.createElement(d.a,null),r.a.createElement(c.a,{className:"mb-4",elevation:0},r.a.createElement(b.a,null,r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(E.a,{className:"pl-sm-24"},"#"),r.a.createElement(E.a,{className:"px-0"},"Item Name"),r.a.createElement(E.a,{className:"px-0"},"Description"),r.a.createElement(E.a,{className:"px-0"},"Quantity"),r.a.createElement(E.a,{className:"px-0"},"Action"))),r.a.createElement(v.a,null,k.map((function(e,a){return e.unit*e.price,r.a.createElement(f.a,{key:a},r.a.createElement(E.a,{className:"pl-sm-24 capitalize",align:"left"},a+1),r.a.createElement(E.a,{className:"pl-0 capitalize",align:"left"},e.name),r.a.createElement(E.a,{className:"pl-0 capitalize",align:"left"},e.price),r.a.createElement(E.a,{className:"pl-0 capitalize"},e.unit),r.a.createElement(E.a,{className:"pl-0"},r.a.createElement(O.b,{to:"/sales/rfq-form/rfqanalysis"},r.a.createElement(u.a,null,"search"))))})))))))},C=t(13),q=t(16),k=t(52),I=t(1560),z=t(2140),D=t(2036),S=["palette"],V=Object(y.a)((function(e){e.palette,Object(s.a)(e,S);return{invoiceEditor:{"& h5":{fontSize:15}}}})),T={id:"",orderNo:"",buyer:{name:"",address:""},seller:{name:"",address:""},item:[],status:"",vat:"",date:new Date,currency:"",loading:!1},W=function(e){var a=e.isNewInvoice,t=e.toggleInvoiceEditor,c=Object(l.useState)(!0),s=Object(n.a)(c,2),m=s[0],u=s[1],O=Object(l.useState)(T),N=Object(n.a)(O,2),y=N[0],x=N[1],w=(Object(j.g)(),Object(j.i)().id),M=V(),S=Object(l.useCallback)((function(){var e=Math.random().toString(),a=e.substr(2,e.length-1);x((function(e){return Object(i.a)(Object(i.a)({},e),{},{id:a})}))}),[]),W=function(e,a){var t=Object(C.a)(y.item);t.map((function(t,n){return a===n&&(t[e.target.name]=e.target.value),t})),x(Object(i.a)(Object(i.a)({},y),{},{item:t}))},_=function(e){x(Object(i.a)(Object(i.a)({},y),{},{date:e}))},A=Object(j.g)();Object(l.useEffect)((function(){a?S():Object(g.c)(w).then((function(e){var a=e.data;m&&x(Object(i.a)({},a))}))}),[w,a,m,S]),Object(l.useEffect)((function(){return function(){return u(!1)}}),[]);var P=y.orderNo,B=y.buyer,R=(y.seller,y.item),J=void 0===R?[]:R,K=(y.status,y.vat,y.date),Q=(y.currency,y.loading);return r.a.createElement("div",{className:Object(h.default)("invoice-viewer py-4",M.invoiceEditor)},r.a.createElement(k.ValidatorForm,{onSubmit:function(){x(Object(i.a)(Object(i.a)({},y),{},{loading:!0}));var e=Object(i.a)({},y);delete e.loading,a?Object(g.a)(e).then((function(){x(Object(i.a)(Object(i.a)({},y),{},{loading:!1})),A.push("/invoice/".concat(y.id)),t()})):Object(g.d)(e).then((function(){x(Object(i.a)(Object(i.a)({},y),{},{loading:!1})),t()}))},onError:function(e){return null}},r.a.createElement("div",{className:"viewer_actions px-4 flex justify-end"},r.a.createElement("div",{className:"mb-6"},r.a.createElement(o.a,{type:"button",className:"mr-4 py-2",variant:"text",onClick:function(){return t()}},"Cancel"),r.a.createElement(o.a,{type:"submit",className:"py-2",variant:"contained",color:"primary",disabled:Q},"Save"))),r.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},r.a.createElement("div",null,r.a.createElement("h5",{className:"mb-2"},"Customer Name"),r.a.createElement(k.TextValidator,{label:"Customer Name.",type:"text",fullWidth:!0,name:"orderNo",value:P,onChange:function(e){e.persist(),x(Object(i.a)(Object(i.a)({},y),{},Object(q.a)({},e.target.name,e.target.value)))},validators:["required"],errorMessages:["this field is required"]}),r.a.createElement("h5",{className:"mb-2"},"Address"),r.a.createElement(k.TextValidator,{label:"Buyer Address",onChange:function(e){return function(e,a){e.persist(),x(Object(i.a)(Object(i.a)({},y),{},Object(q.a)({},a,Object(i.a)(Object(i.a)({},y[a]),{},Object(q.a)({},e.target.name,e.target.value)))))}(e,"buyer")},type:"text",name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:B?B.address:null,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement("div",null,r.a.createElement("div",{className:"text-right"},r.a.createElement("h5",{className:"font-normal"},r.a.createElement("strong",null,"Requested date: "))),r.a.createElement(I.a,{utils:D.a},r.a.createElement(z.a,{margin:"none",id:"mui-pickers-date",label:"Requested Date",inputVariant:"standard",type:"text",autoOk:!0,value:K,fullWidth:!0,format:"MMMM dd, yyyy",onChange:_,KeyboardButtonProps:{"aria-label":"change date"}})),r.a.createElement("div",{className:"text-right"},r.a.createElement("h5",{className:"font-normal"},r.a.createElement("strong",null,"Due date: "))),r.a.createElement(I.a,{utils:D.a},r.a.createElement(z.a,{margin:"none",id:"mui-pickers-date",label:"Due Date",inputVariant:"standard",type:"text",autoOk:!0,value:K,fullWidth:!0,format:"MMMM dd, yyyy",onChange:_,KeyboardButtonProps:{"aria-label":"change date"}})))),r.a.createElement(d.a,null),r.a.createElement(b.a,{className:"mb-4"},r.a.createElement(p.a,null,r.a.createElement(f.a,{className:"bg-default"},r.a.createElement(E.a,{className:"pl-sm-24"},"#"),r.a.createElement(E.a,{className:"px-0"},"Item Name"),r.a.createElement(E.a,{className:"px-0"},"description"),r.a.createElement(E.a,{className:"px-0"},"Quantity"),r.a.createElement(E.a,{className:"px-0"},"Action"))),r.a.createElement(v.a,null,J.map((function(e,a){return e.price*e.unit,r.a.createElement(f.a,{key:a},r.a.createElement(E.a,{className:"pl-sm-24 capitalize",align:"left"},a+1),r.a.createElement(E.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(k.TextValidator,{label:"Item Name",onChange:function(e){return W(e,a)},type:"text",name:"name",fullWidth:!0,value:e?e.name:null,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(E.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(k.TextValidator,{label:"Item Price",onChange:function(e){return W(e,a)},type:"number",name:"price",fullWidth:!0,value:e?e.price:null,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(E.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(k.TextValidator,{label:"Item Unit",onChange:function(e){return W(e,a)},type:"number",name:"unit",fullWidth:!0,value:e?e.unit:null,validators:["required"],errorMessages:["this field is required"]})),r.a.createElement(E.a,{className:"pl-0 capitalize",align:"left"},r.a.createElement(o.a,{onClick:function(){return function(e){var a=Object(C.a)(y.item);a.splice(e,1),x(Object(i.a)(Object(i.a)({},y),{},{item:a}))}(a)}},"Delete")))})))),r.a.createElement("div",{className:"flex justify-end px-4 mb-4"},r.a.createElement(o.a,{onClick:function(){var e=Object(C.a)(y.item);e.push({name:"",unit:"",price:""}),x(Object(i.a)(Object(i.a)({},y),{},{item:e}))}},"Add Item"))))};a.default=function(){var e=Object(l.useState)(!1),a=Object(n.a)(e,2),t=a[0],i=a[1],s=Object(l.useState)(!1),m=Object(n.a)(s,2),u=m[0],o=m[1],d=Object(j.i)().id,b=function(){i(!t),o(!1)};return Object(l.useEffect)((function(){"add"===d&&(i(!0),o(!0))}),[d]),r.a.createElement(c.a,{elevation:6,className:"m-sm-30"},t?r.a.createElement(W,{toggleInvoiceEditor:b,isNewInvoice:u}):r.a.createElement(M,{toggleInvoiceEditor:b}))}}}]);